/***
 * Navbar:
 */

[class*="container"] {
	.row {
		> .col,
		> [class*="-col-"] {
			> .navbar {
				margin-left: -$gutter-width;
				margin-right: -$gutter-width;
			}
		}
	}
}

/**
 * Navbar:
 * `.navbar`
 *
 *     @example
 *     nav.navbar.maxsm-navbar-responsive
 *         div.navbar__brand
 *             a(href='').navbar__link Brand
 *         a(href="#!").navbar__toggler Menu
 *         div.navbar__collapse
 *             ul.navbar__menu.maxsm-txt-center
 *                 li.navbar__item.active.maxsm-bd-top
 *                     a(href='').navbar__link Home
 *                 li.navbar__item.maxsm-bd-top
 *                     a(href='').navbar__link Archive
 *                 li.navbar__item.maxsm-bd-top
 *                     a(href='').navbar__link About
 *             form.navbar__form.maxsm-txt-center.maxsm-bd-top
 *                 div.input-group
 *                     div.input-group-btn
 *                         input(type='search', placeholder='Search').input.input--line.maxsm-txt-center
 *                         a(href='').btn.btn--secondary.maxsm-hide Go
 */
.navbar,
.navbar__brand,
.navbar__collapse,
.navbar__menu,
.navbar__item,
.navbar__link,
.navbar__form {
	display: flex;
}

.navbar__brand,
.navbar__toggler,
.navbar__link,
.navbar__form {
	align-items: center;
}

.navbar,
.navbar__brand,
.navbar__toggler,
.navbar__menu,
.navbar__form {
	min-height: 3.5rem;
}

.navbar {
	background-color: $navbar-background-color;
	justify-content: flex-start;
}

.navbar__brand {
	font-size: $navbar-brand-font-size;

	> * {
		margin-right: $half-spacing-unit;
	}
}

.navbar__toggler {
	display: none;
}

.navbar__toggler,
.navbar__link,
.navbar__form {
	padding: $quarter-spacing-unit $half-spacing-unit;
}

.navbar__collapse,
.navbar__menu {
	flex-grow: 1;
}

.navbar__menu {
	margin: 0;
	padding: 0;
}

/**
 * Right align navbar menu:
 * `.navbar__menu--right`
 *
 *     @example
 *     nav.navbar.maxsm-navbar-responsive
 *         div.navbar__brand
 *             a(href='').navbar__link Brand
 *         a(href='#!').navbar__toggler Menu
 *         div.navbar__collapse
 *             ul.navbar__menu.navbar__menu--right.maxsm-txt-center
 *                 li.navbar__item.active.maxsm-bd-top
 *                     a(href='').navbar__link Home
 *                 li.navbar__item.maxsm-bd-top
 *                     a(href='').navbar__link Archive
 *                 li.navbar__item.maxsm-bd-top
 *                     a(href='').navbar__link About
 */
// .navbar__collapse:last-child {
// 	.navbar__menu {
// 		justify-content: flex-end;
// 	}
// }

.navbar__menu--right {
	justify-content: flex-end;
}

.navbar__item {
	align-items: stretch;

	&.active {
		.navbar__link {
			&:link,
			&:hover,
			&:visited {
				color: $link-color;
			}
		}
	}
}

.navbar__link,
.navbar__toggler {
	&:link,
	&:visited {
		color: $text-color;
	}

	&:hover {
		color: $link-color;
	}
}

/**
 * Responsive navbar menu:
 * `.navbar-responsive` `.max[size]-navbar-responsive`
 *
 *     @example
 *     nav.navbar.navbar-responsive
 *         div.navbar__brand
 *             a(href='').navbar__link Brand
 *         a(href='#!').navbar__toggler Menu
 *         div.navbar__collapse
 *             ul.navbar__menu
 *                 li.navbar__item.active
 *                     a(href='').navbar__link Home
 *                 li.navbar__item
 *                     a(href='').navbar__link Archive
 *                 li.navbar__item
 *                     a(href='').navbar__link About
 */
@mixin navbar-responsive-collapse-focus {
	// animation: fade-in-move-down 0.8s;
	max-height: 600px;
	opacity: 1;
	transform: translateY(0);
	z-index: 10;
}

@mixin navbar-responsive-collapse {
	.navbar__toggler {
		display: flex;
		order: 2;

		&:focus ~ .navbar__collapse:not(.close) {
			@include navbar-responsive-collapse-focus;
		}

		// &:not(:focus) + .navbar__collapse,
		// *:not(.input:focus-within) {
		// 	animation: fade-out-move-up 0.4s;
		// }
	}

	.navbar__collapse {
		flex-wrap: wrap;
		max-height: 0;
		opacity: 0;
		padding: 0 $half-spacing-unit;
		transform: translateY(-$half-spacing-unit);
		transition: $navbar-collapse-transition;
		width: 100%;
		z-index: -1;

		&:focus-within,
		&.open {
			@include navbar-responsive-collapse-focus;
		}

		// &:not(:focus-within) {
		// 	animation: fade-out-move-up 0.4s;
		// }

		&:first-of-type {
			order: 4;
		}

		&:last-of-type {
			order: 3;
		}
	}

	// @keyframes fade-in-move-down {
	// 	0% {
	// 		max-height: 0;
	// 		opacity: 0;
	// 		transform: translateY(-$base-spacing-unit);
	// 	}

	// 	100% {
	// 		max-height: 600px;
	// 		opacity: 1;
	// 		transform: translateY(0);
	// 	}
	// }

	// @keyframes fade-out-move-up {
	// 	100% {
	// 		max-height: 0;
	// 		opacity: 0;
	// 		transform: translateY(-$base-spacing-unit);
	// 	}

	// 	0% {
	// 		max-height: 600px;
	// 		opacity: 1;
	// 		transform: translateY(0);
	// 	}
	// }

	.navbar__menu,
	.navbar__item {
		flex-direction: column;
	}

	.navbar__link,
	.navbar__form {
		display: block;
		width: 100%;
	}

	.navbar__item {
		.navbar__link {
			padding-right: 0;
			padding-left: 0;
		}
	}

	.navbar__form {
		padding: 0;
	}

	.input,
	.btn {
		line-height: inherit;
	}
}

@mixin navbar-responsive {
	&.navbar {
		flex-wrap: wrap;
		justify-content: space-between;
	}

	@include navbar-responsive-collapse;
}

.navbar-responsive {
	@include navbar-responsive;
}

@each $size, $length in $grid-breakpoints {
	@media (max-width: $length - 1) {
		.max#{$size}-navbar-responsive {
			@include navbar-responsive;
		}
	}
}

/**
 * Open responsive navbar menu:
 * `.open`
 *
 *     @example
 *     nav.navbar.navbar-responsive
 *         div.navbar__brand
 *             a(href='').navbar__link Brand
 *         a(href='#!').navbar__toggler Menu
 *         div.navbar__collapse.open
 *             ul.navbar__menu
 *                 li.navbar__item.active
 *                     a(href='').navbar__link Home
 *                 li.navbar__item
 *                     a(href='').navbar__link Archive
 *                 li.navbar__item
 *                     a(href='').navbar__link About
 */

/**
 * Responsive navbar grid menu:
 *
 *     @example
 *     nav.navbar.maxlg-navbar-responsive
 *         div.navbar__brand
 *             a(href='').navbar__link Brand
 *         a(href="#!").navbar__toggler Menu
 *         div.navbar__collapse
 *             ul.navbar__menu.navbar__menu--right.xs-grid-2.md-grid-3.lg-grid-0.maxlg-gutters-0.maxlg-txt-center
 *                 li.navbar__item.active.xs-bd-bottom.lg-bd-bottom-0
 *                     a(href='').navbar__link Home
 *                 li.navbar__item.xs-bd-bottom.xs-bd-left.md-bd-x.lg-bd-0
 *                     a(href='').navbar__link Archive
 *                 li.navbar__item.md-bd-bottom.lg-bd-bottom-0
 *                     a(href='').navbar__link Contact
 *                 li.navbar__item.xs-bd-left.md-bd-x.lg-bd-x-0.md-cell-x-2
 *                     a(href='').navbar__link About
 */

/**
 * Navbar brand in the center:
 *
 *     @example
 *     nav.navbar.maxlg-navbar-responsive
 *         a(href="#!").navbar__toggler Menu
 *         div.navbar__collapse
 *             ul.navbar__menu.maxlg-txt-center
 *                 li.navbar__item.maxlg-bd-top
 *                     a(href='').navbar__link RSS feed
 *                 li.navbar__item.maxlg-bd-top
 *                     a(href='').navbar__link Follow me
 *         div.navbar__brand
 *             a(href='').navbar__link Brand
 *         div.navbar__collapse
 *             ul.navbar__menu.navbar__menu--right.maxlg-txt-center
 *                 li.navbar__item.active.maxlg-bd-top
 *                     a(href='').navbar__link Home
 *                 li.navbar__item.maxlg-bd-top
 *                     a(href='').navbar__link Archive
 *                 li.navbar__item.maxlg-bd-top
 *                     a(href='').navbar__link About
 */

/**
 * Navbar optional classes:
 * `.fixed` `.scrolled`
 *
 *     @example
 *     table.tbl
 *         thead
 *             tr
 *                 th Class
 *                 th Description
 *         tbody
 *             tr
 *                 td <code>.fixed</code>
 *                 td Fija el <code>.navbar</code> en la parte superior de la p√°gina.
 *             tr
 *                 td <code>.scrolled</code>
 *                 td Agrega una sombra al <code>.navbar</code> cuando se desplaza la scrollbar vertical.
 */
.navbar {
	transition: $base-transition;

	&.fixed {
		position: fixed;
		width: 100%;
		z-index: 1000;
	}

	&.scrolled {
		box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.06),
					0 4px 5px 0 rgba(0, 0, 0, 0.06),
					0 1px 10px 0 rgba(0, 0, 0, 0.08);
	}
}

.night {
	.navbar {
		background-color: $night-navbar-background-color;
	}

	.navbar__item {
		&.active {
			.navbar__link {
				&:link,
				&:hover,
				&:visited {
					color: $night-link-color;
				}
			}
		}
	}

	.navbar__link,
	.navbar__toggler {
		&:link,
		&:visited {
			color: $night-text-color;
		}

		&:hover {
			color: $night-link-color;
		}
	}

	.navbar {
		&.scrolled {
			box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 
						0 4px 5px 0 rgba(0, 0, 0, 0.14), 
						0 1px 10px 0 rgba(0, 0, 0, 0.12);
		}
	}
}
